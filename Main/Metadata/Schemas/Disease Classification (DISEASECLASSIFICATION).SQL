CREATE TABLE IF NOT EXISTS DISEASECLASSIFICATION (
	ID INTEGER,
	CID CHAR(5),
	DESCRIPTION VARCHAR(100),
	
    CONSTRAINT PK_DISEASECLASSIFICATION__ID PRIMARY KEY (ID),
    CONSTRAINT UQ_DISEASECLASSIFICATION__CID UNIQUE (CID),
    CONSTRAINT NN_DISEASECLASSIFICATION__CID CHECK (CID IS NOT NULL),
    CONSTRAINT NN_DISEASECLASSIFICATION__DESCRIPTION CHECK (DESCRIPTION IS NOT NULL)
);

CREATE SEQUENCE IF NOT EXISTS SQ_DISEASECLASSIFICATION__ID;

ALTER SEQUENCE SQ_DISEASECLASSIFICATION__ID RESTART WITH 1;

CREATE OR REPLACE FUNCTION BI_DISEASECLASSIFICATION__ID()
RETURNS TRIGGER AS
$$
BEGIN
  IF NEW.ID IS NULL THEN
    NEW.ID := NEXTVAL('SQ_DISEASECLASSIFICATION__ID');
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE PLPGSQL;

CREATE OR REPLACE TRIGGER BI_DISEASECLASSIFICATION__ID
BEFORE INSERT ON DISEASECLASSIFICATION
FOR EACH ROW
EXECUTE FUNCTION BI_DISEASECLASSIFICATION__ID();
