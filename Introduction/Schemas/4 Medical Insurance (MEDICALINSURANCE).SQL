CREATE TABLE IF NOT EXISTS MEDICALINSURANCE (
    ID INTEGER,
    DESCRIPTION VARCHAR(75),

    CONSTRAINT PK_MEDICALINSURANCE__ID PRIMARY KEY (ID),
    CONSTRAINT UQ_MEDICALINSURANCE__DESCRIPTION UNIQUE (DESCRIPTION),
    CONSTRAINT NN_MEDICALINSURANCE__DESCRIPTION CHECK (DESCRIPTION IS NOT NULL)
);

CREATE SEQUENCE IF NOT EXISTS SQ_MEDICALINSURANCE__ID;

ALTER SEQUENCE SQ_MEDICALINSURANCE__ID RESTART WITH 1;

CREATE OR REPLACE FUNCTION BI_MEDICALINSURANCE__ID()
RETURNS TRIGGER AS
$$
BEGIN
  IF NEW.ID IS NULL THEN
    NEW.ID := NEXTVAL('SQ_MEDICALINSURANCE__ID');
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE PLPGSQL;

CREATE OR REPLACE TRIGGER BI_MEDICALINSURANCE__ID
BEFORE INSERT ON MEDICALINSURANCE
FOR EACH ROW
EXECUTE FUNCTION BI_MEDICALINSURANCE__ID();

INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('BRADESCO SAUDE')
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('SULAMERICA SAUDE')
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('NOTREDAME INTERMEDICA') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('AMIL') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('UNIMED') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('ALICE') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('MEDSENIOR') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('PROASA SAUDE') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('PORTO SEGURO SAUDE') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('VERA CRUZ') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('ALBERT EINSTEIN') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('OSWALDO CRUZ') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO MEDICALINSURANCE (DESCRIPTION) VALUES ('CASSI') 
ON CONFLICT (DESCRIPTION) DO NOTHING;
