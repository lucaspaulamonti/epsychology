CREATE TABLE IF NOT EXISTS DISABILITYPERSON (
    ID INTEGER,
    DESCRIPTION VARCHAR(75),

    CONSTRAINT PK_DISABILITYPERSON__ID PRIMARY KEY (ID),
    CONSTRAINT UQ_DISABILITYPERSON__DESCRIPTION UNIQUE (DESCRIPTION),
    CONSTRAINT NN_DISABILITYPERSON__DESCRIPTION CHECK (DESCRIPTION IS NOT NULL)
);

CREATE SEQUENCE IF NOT EXISTS SQ_DISABILITYPERSON__ID;

ALTER SEQUENCE SQ_DISABILITYPERSON__ID RESTART WITH 1;

CREATE OR REPLACE FUNCTION BI_DISABILITYPERSON__ID()
RETURNS TRIGGER AS
$$
BEGIN
  IF NEW.ID IS NULL THEN
    NEW.ID := NEXTVAL('SQ_DISABILITYPERSON__ID');
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE PLPGSQL;

CREATE OR REPLACE TRIGGER BI_DISABILITYPERSON__ID
BEFORE INSERT ON DISABILITYPERSON
FOR EACH ROW
EXECUTE FUNCTION BI_DISABILITYPERSON__ID();

INSERT INTO DISABILITYPERSON (DESCRIPTION) VALUES ('OUTRA DEFICIENCIA FISICA') ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO DISABILITYPERSON (DESCRIPTION) VALUES ('OUTRA DEFICIENCIA VISUAL') ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO DISABILITYPERSON (DESCRIPTION) VALUES ('OUTRA DEFICIENCIA AUDITIVA') ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO DISABILITYPERSON (DESCRIPTION) VALUES ('OUTRA DEFICIENCIA INTELECTUAL') ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO DISABILITYPERSON (DESCRIPTION) VALUES ('OUTRA DEFICIENCIA PSICOSSOCIAL') ON CONFLICT (DESCRIPTION) DO NOTHING;
INSERT INTO DISABILITYPERSON (DESCRIPTION) VALUES ('OUTRA DEFICIENCIA MULTIPLA') ON CONFLICT (DESCRIPTION) DO NOTHING;
