/*
	TBCUSTOMER: TABLE FOR STORING CUSTOMER INFORMATION
	THIS TABLE MUST BE A MIRROR OF THE TABLE TBCOLLABORATOR
	COMPLETED/REVIEWED 27/08/2024
*/

CREATE TABLE TBCUSTOMER (
	ID_ SERIAL NOT NULL PRIMARY KEY,

	NAME_BIOLOGICAL VARCHAR(150) NOT NULL,
    NAME_SOCIAL VARCHAR(150),
    BIRTH DATE,

    DOC_COMPROVSITCAD CHAR(14),
	DOC_REGISTROGERAL CHAR(12),
    DOC_REGISTROALUNO CHAR(6),

    IDBIOLOGICALSEX_ INTEGER,
	IDSEXUALORIENTATION_ INTEGER,
	IDGENDEREXPRESSION_ INTEGER,
	IDGENDERIDENTITY_ INTEGER,

	IDMARITAL_ INTEGER,
	IDRELIGION_ INTEGER,
	IDBLOOD_ INTEGER,
	IDZODIAC_ INTEGER,
	IDETHNICITY_ INTEGER,
	IDOCCUPATION_ INTEGER,
	IDHIERARCHY_ INTEGER,

	ADDRESS VARCHAR(100),
	NUMBER VARCHAR(10),
	DISTRICT VARCHAR(45),
	COMPLEMENT VARCHAR(75),
	CEP CHAR(9),
	IDCITY_ INTEGER,

	DDD CHAR(2),
	FONE CHAR(11),
	MAIL VARCHAR(75),

	OBSERVATION VARCHAR(255),

	FOREIGN KEY (IDBIOLOGICALSEX_) REFERENCES TBBIOLOGICALSEX (ID_),
	FOREIGN KEY (IDSEXUALORIENTATION_) REFERENCES TBSEXUALORIENTATION (ID_),
	FOREIGN KEY (IDGENDEREXPRESSION_) REFERENCES TBGENDEREXPRESSION (ID_),
	FOREIGN KEY (IDGENDERIDENTITY_) REFERENCES TBGENDERIDENTITY (ID_),

	FOREIGN KEY (IDMARITAL_) REFERENCES TBMARITAL (ID_),
	FOREIGN KEY (IDRELIGION_) REFERENCES TBRELIGION (ID_),
	FOREIGN KEY (IDBLOOD_) REFERENCES TBBLOOD (ID_),
	FOREIGN KEY (IDZODIAC_) REFERENCES TBZODIAC (ID_),
	FOREIGN KEY (IDETHNICITY_) REFERENCES TBETHNICITY (ID_),
	FOREIGN KEY (IDOCCUPATION_) REFERENCES TBOCCUPATION (ID_),
	FOREIGN KEY (IDHIERARCHY_) REFERENCES TBHIERARCHY (ID_),

    FOREIGN KEY (IDCITY_) REFERENCES TBCITY (ID_)
);

COMMIT WORK;

COMMENT ON TABLE TBCUSTOMER IS 'TABLE FOR STORING CUSTOMER INFORMATION';

COMMENT ON COLUMN TBCUSTOMER.ID_ IS 'UNIQUE IDENTIFIER FOR THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.NAME_BIOLOGICAL IS 'BIOLOGICAL NAME OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.NAME_SOCIAL IS 'SOCIAL NAME OF THE CUSTOMER (IF APPLICABLE)';
COMMENT ON COLUMN TBCUSTOMER.BIRTH IS 'CUSTOMERS DATE OF BIRTH';

COMMENT ON COLUMN TBCUSTOMER.DOC_COMPROVSITCAD IS 'CUSTOMERS CPF (TAXPAYER IDENTIFICATION NUMBER)';
COMMENT ON COLUMN TBCUSTOMER.DOC_REGISTROGERAL IS 'CUSTOMERS RG (GENERAL REGISTRATION NUMBER)';
COMMENT ON COLUMN TBCUSTOMER.DOC_REGISTROALUNO IS 'CUSTOMERS RA (STUDENT REGISTRATION NUMBER)';

COMMENT ON COLUMN TBCUSTOMER.IDBIOLOGICALSEX_ IS 'FOREIGN KEY REFERENCING THE BIOLOGICAL SEX OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.IDSEXUALORIENTATION_ IS 'FOREIGN KEY REFERENCING THE SEXUAL ORIENTATION OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.IDGENDEREXPRESSION_ IS 'FOREIGN KEY REFERENCING THE GENDER EXPRESSION OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.IDGENDERIDENTITY_ IS 'FOREIGN KEY REFERENCING THE GENDER IDENTITY OF THE CUSTOMER';

COMMENT ON COLUMN TBCUSTOMER.IDMARITAL_ IS 'FOREIGN KEY REFERENCING THE MARITAL STATUS OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.IDRELIGION_ IS 'FOREIGN KEY REFERENCING THE RELIGION OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.IDBLOOD_ IS 'FOREIGN KEY REFERENCING THE BLOOD TYPE OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.IDZODIAC_ IS 'FOREIGN KEY REFERENCING THE ZODIAC SIGN OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.IDETHNICITY_ IS 'FOREIGN KEY REFERENCING THE ETHNICITY OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.IDOCCUPATION_ IS 'FOREIGN KEY REFERENCING THE OCCUPATION OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.IDHIERARCHY_ IS 'FOREIGN KEY REFERENCING THE HIERARCHY OF THE CUSTOMER';

COMMENT ON COLUMN TBCUSTOMER.ADDRESS IS 'STREET ADDRESS OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.NUMBER IS 'ADDRESS NUMBER OF THE CUSTOMER';
COMMENT ON COLUMN TBCUSTOMER.DISTRICT IS 'DISTRICT OF THE CUSTOMERS ADDRESS';
COMMENT ON COLUMN TBCUSTOMER.COMPLEMENT IS 'ADDITIONAL ADDRESS INFORMATION (E.G., APARTMENT NUMBER)';
COMMENT ON COLUMN TBCUSTOMER.CEP IS 'POSTAL CODE (CEP) OF THE CUSTOMERS ADDRESS';
COMMENT ON COLUMN TBCUSTOMER.IDCITY_ IS 'FOREIGN KEY REFERENCING THE CITY OF THE CUSTOMERS ADDRESS';

COMMENT ON COLUMN TBCUSTOMER.DDD IS 'AREA CODE OF THE CUSTOMERS PHONE NUMBER';
COMMENT ON COLUMN TBCUSTOMER.FONE IS 'CUSTOMERS PHONE NUMBER';
COMMENT ON COLUMN TBCUSTOMER.MAIL IS 'CUSTOMERS EMAIL ADDRESS';

COMMENT ON COLUMN TBCUSTOMER.OBSERVATION IS 'ADDITIONAL OBSERVATIONS REGARDING THE CUSTOMER';

COMMIT WORK;

INSERT INTO TBCUSTOMER (
	NAME_BIOLOGICAL, NAME_SOCIAL, BIRTH, 
	DOC_COMPROVSITCAD, DOC_REGISTROGERAL, DOC_REGISTROALUNO, 
	IDBIOLOGICALSEX_, IDSEXUALORIENTATION_, IDGENDEREXPRESSION_, IDGENDERIDENTITY_, 
	IDMARITAL_, IDRELIGION_, IDBLOOD_, IDZODIAC_, IDETHNICITY_, IDOCCUPATION_, 
	ADDRESS, NUMBER, DISTRICT, COMPLEMENT, CEP, IDCITY_, 
	DDD, FONE, MAIL, OBSERVATION) 
VALUES (
	'JOAO SILVA', 'JOANA SILVA', '1990-01-01', 
	'123.456.789-00', 'MG-12.345.678', '123456', 
	1, 2, 3, 4, 
	1, 2, 3, 4, 5, 6, 
	'RUA DAS FLORES', '123', 'CENTRO', 'APT 101', '12345-678', 1, 
	'31', '998765432', 'JOANA.SILVA@EXAMPLE.COM', NULL
);

COMMIT WORK;