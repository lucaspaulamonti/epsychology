/*
    TBFAMILY: TABLE FOR STORING INFORMATION ABOUT CUSTOMER FAMILY
    COMPLETED/REVIEWED 27/08/2024
*/

CREATE TABLE TBFAMILY (
	ID_ SERIAL NOT NULL PRIMARY KEY,
	IDCUSTOMER_ INTEGER NOT NULL UNIQUE,

	NAMEFATHER VARCHAR(150),
	IDOCCUPATIONFATHER_ INTEGER,
	DDDFATHER CHAR(2),
	FONEFATHER CHAR(11),
	
	NAME_MOTHER VARCHAR(150),
	IDOCCUPATIONMOTHER_ INTEGER,
	DDDMOTHER CHAR(2),
	FONEMOTHER CHAR(11),
	
	NAMEPARTNER VARCHAR(150),
	IDOCCUPATIONPARTNER_ INTEGER,
	DDDPARTNER CHAR(2),
	FONEPARTNER CHAR(11),

	OBSERVATION VARCHAR(255),

	FOREIGN KEY (IDCUSTOMER_) REFERENCES TBCUSTOMER (ID_),
	FOREIGN KEY (IDOCCUPATIONFATHER_) REFERENCES TBOCCUPATION (ID_),
	FOREIGN KEY (IDOCCUPATIONMOTHER_) REFERENCES TBOCCUPATION (ID_),
	FOREIGN KEY (IDOCCUPATIONPARTNER_) REFERENCES TBOCCUPATION (ID_)
);

COMMIT WORK;

COMMENT ON TABLE TBFAMILY IS 'TABLE FOR STORING INFORMATION ABOUT A CLIENTS FAMILY MEMBERS';
COMMENT ON COLUMN TBFAMILY.IDCUSTOMER_ IS 'REFERENCE TO CUSTOMER ID IN TABLE TBCUSTOMER';

COMMENT ON COLUMN TBFAMILY.NAMEFATHER IS 'CUSTOMERS FATHERS NAME';
COMMENT ON COLUMN TBFAMILY.IDOCCUPATIONFATHER_ IS 'REFERENCE TO THE FATHERS OCCUPATION IN THE TBOCCUPATION TABLE';
COMMENT ON COLUMN TBFAMILY.DDDFATHER IS 'FATHERS PHONE AREA CODE';
COMMENT ON COLUMN TBFAMILY.PHONEFATHER IS 'FATHERS PHONE NUMBER';

COMMENT ON COLUMN TBFAMILY.NAMEMOTHER IS 'CUSTOMERS MOTHERS NAME';
COMMENT ON COLUMN TBFAMILY.IDOCCUPATIONMOTHER_ IS 'REFERENCE TO THE MOTHERS OCCUPATION IN THE TBOCCUPATION TABLE';
COMMENT ON COLUMN TBFAMILY.DDDMOTHER IS 'MOTHERS PHONE AREA CODE';
COMMENT ON COLUMN TBFAMILY.PHONEMOTHER IS 'MOTHERS PHONE NUMBER';

COMMENT ON COLUMN TBFAMILY.NAMEPARTNER IS 'NAME OF CLIENTS SPOUSE OR PARTNER';
COMMENT ON COLUMN TBFAMILY.IDOCCUPATIONPARTNER_ IS 'REFERENCE TO THE OCCUPATION OF THE SPOUSE OR PARTNER IN THE TBOCCUPATION TABLE';
COMMENT ON COLUMN TBFAMILY.DDDPARTNER IS 'SPOUSE OR PARTNERS TELEPHONE AREA CODE';
COMMENT ON COLUMN TBFAMILY.FONEPARTNER IS 'SPOUSE OR PARTNERS TELEPHONE NUMBER';

COMMENT ON COLUMN TBFAMILY.OBSERVATION IS 'FIELD FOR ADDITIONAL OBSERVATIONS ABOUT THE CLIENTS FAMILY';

COMMIT WORK;